require 'test_helper'

class PoliciesControllerTest < ActionDispatch::IntegrationTest
  setup do
    @policy = policies(:one)
  end

  test "should get index" do
    get policies_url
    assert_response :success
  end

  test "should get new" do
    get new_policy_url
    assert_response :success
  end

  test "should create policy" do
    assert_difference('Policy.count') do
      post policies_url, params: { policy: { agency: @policy.agency, average_ex_post_emission_reduction_kt_co2eq/y: @policy.average_ex_post_emission_reduction_kt_co2eq/y, country: @policy.country, date_effective: @policy.date_effective, description: @policy.description, description_of_projected_cost_estimates: @policy.description_of_projected_cost_estimates, description_of_realised_cost_estimates: @policy.description_of_realised_cost_estimates, explanation_of_the_basis_for_the_mitigation_estimates: @policy.explanation_of_the_basis_for_the_mitigation_estimates, factors_affected_by_the_policy_or_measure: @policy.factors_affected_by_the_policy_or_measure, general_comment: @policy.general_comment, ghg_emissions_reductions_esd_in_2020_kt_co2eq/y: @policy.ghg_emissions_reductions_esd_in_2020_kt_co2eq/y, ghg_emissions_reductions_esd_in_2025_kt_co2eq/y: @policy.ghg_emissions_reductions_esd_in_2025_kt_co2eq/y, ghg_emissions_reductions_esd_in_2030_kt_co2eq/y: @policy.ghg_emissions_reductions_esd_in_2030_kt_co2eq/y, ghg_emissions_reductions_esd_in_2035_kt_co2eq/y: @policy.ghg_emissions_reductions_esd_in_2035_kt_co2eq/y, ghg_emissions_reductions_eu_ets_in_2020_kt_co2eq/y: @policy.ghg_emissions_reductions_eu_ets_in_2020_kt_co2eq/y, ghg_emissions_reductions_eu_ets_in_2025_kt_co2eq/y: @policy.ghg_emissions_reductions_eu_ets_in_2025_kt_co2eq/y, ghg_emissions_reductions_eu_ets_in_2030_kt_co2eq/y: @policy.ghg_emissions_reductions_eu_ets_in_2030_kt_co2eq/y, ghg_emissions_reductions_eu_ets_in_2035_kt_co2eq/y: @policy.ghg_emissions_reductions_eu_ets_in_2035_kt_co2eq/y, ghgs_affected: @policy.ghgs_affected, implementation_period_finish: @policy.implementation_period_finish, indicator_used_to_monitor_and_evaluate_progress_over_time: @policy.indicator_used_to_monitor_and_evaluate_progress_over_time, is_the_policy_or_measure_related_to_a_union_policy?: @policy.is_the_policy_or_measure_related_to_a_union_policy?, jurisdiction: @policy.jurisdiction, link: @policy.link, link_to_national_report: @policy.link_to_national_report, main_reference: @policy.main_reference, name_of_policy_or_measure: @policy.name_of_policy_or_measure, objectives: @policy.objectives, policy_impacting_eu_ets,_esd_or_lulucf_emissions: @policy.policy_impacting_eu_ets,_esd_or_lulucf_emissions, price_reference_year_projected_costs: @policy.price_reference_year_projected_costs, price_reference_year_realised_costs: @policy.price_reference_year_realised_costs, projected_absolute_benefit_per_year_eur: @policy.projected_absolute_benefit_per_year_eur, projected_absolute_costs_per_year_eur: @policy.projected_absolute_costs_per_year_eur, projected_benefits_eur_per_tonne_co2eq_reduced/_sequestered: @policy.projected_benefits_eur_per_tonne_co2eq_reduced/_sequestered, projected_costs_eur_per_tonne_co2eq_reduced/_sequestered: @policy.projected_costs_eur_per_tonne_co2eq_reduced/_sequestered, projected_net_cost_per_year_eur: @policy.projected_net_cost_per_year_eur, projected_net_costs_eur_per_tonne_co2eq_reduced/_sequestered: @policy.projected_net_costs_eur_per_tonne_co2eq_reduced/_sequestered, projection_scenario_in_which_the_policy_or_measure_is_included: @policy.projection_scenario_in_which_the_policy_or_measure_is_included, quantified_objective: @policy.quantified_objective, realised_absolute_benefit_per_year_eur: @policy.realised_absolute_benefit_per_year_eur, realised_absolute_costs_per_year_eur: @policy.realised_absolute_costs_per_year_eur, realised_benefits_eur_per_tonne_co2eq_reduced/_sequestered: @policy.realised_benefits_eur_per_tonne_co2eq_reduced/_sequestered, realised_costs__eur_per_tonne_co2eq_reduced/_sequestered: @policy.realised_costs__eur_per_tonne_co2eq_reduced/_sequestered, realised_net_cost_per_year_eur: @policy.realised_net_cost_per_year_eur, realised_net_costs_eur_per_tonne_co2eq_reduced/_sequestered: @policy.realised_net_costs_eur_per_tonne_co2eq_reduced/_sequestered, reference_for_ex-ante_assessment: @policy.reference_for_ex-ante_assessment, reference_for_ex-post_assessment: @policy.reference_for_ex-post_assessment, reference_for_projected_costs_and_benefits: @policy.reference_for_projected_costs_and_benefits, reference_for_realised_costs_and_benefits: @policy.reference_for_realised_costs_and_benefits, related_union_policy: @policy.related_union_policy, sectors_affected: @policy.sectors_affected, single_policy_or_measure_or_group_of_measures: @policy.single_policy_or_measure_or_group_of_measures, status_of_implementation: @policy.status_of_implementation, total_ghg_emissions_reductions_in_2020_kt_co2eq/y: @policy.total_ghg_emissions_reductions_in_2020_kt_co2eq/y, total_ghg_emissions_reductions_in_2025_kt_co2eq/y: @policy.total_ghg_emissions_reductions_in_2025_kt_co2eq/y, total_ghg_emissions_reductions_in_2030_kt_co2eq/y: @policy.total_ghg_emissions_reductions_in_2030_kt_co2eq/y, total_ghg_emissions_reductions_in_2035_kt_co2eq/y: @policy.total_ghg_emissions_reductions_in_2035_kt_co2eq/y, type_of_policy_instrument: @policy.type_of_policy_instrument, url_to_main_reference: @policy.url_to_main_reference, web_link_for_ex-ante_assessment: @policy.web_link_for_ex-ante_assessment, web_link_for_ex-post_assessment: @policy.web_link_for_ex-post_assessment, web_link_for_projected_costs_and_benefits: @policy.web_link_for_projected_costs_and_benefits, web_link_for_realised_costs_and_benefits: @policy.web_link_for_realised_costs_and_benefits, year_for_which_reduction_applies_ex_post: @policy.year_for_which_reduction_applies_ex_post, year_projected_cost_has_been_calculated_for: @policy.year_projected_cost_has_been_calculated_for, year_realised_cost_has_been_calculated_for: @policy.year_realised_cost_has_been_calculated_for } }
    end

    assert_redirected_to policy_url(Policy.last)
  end

  test "should show policy" do
    get policy_url(@policy)
    assert_response :success
  end

  test "should get edit" do
    get edit_policy_url(@policy)
    assert_response :success
  end

  test "should update policy" do
    patch policy_url(@policy), params: { policy: { agency: @policy.agency, average_ex_post_emission_reduction_kt_co2eq/y: @policy.average_ex_post_emission_reduction_kt_co2eq/y, country: @policy.country, date_effective: @policy.date_effective, description: @policy.description, description_of_projected_cost_estimates: @policy.description_of_projected_cost_estimates, description_of_realised_cost_estimates: @policy.description_of_realised_cost_estimates, explanation_of_the_basis_for_the_mitigation_estimates: @policy.explanation_of_the_basis_for_the_mitigation_estimates, factors_affected_by_the_policy_or_measure: @policy.factors_affected_by_the_policy_or_measure, general_comment: @policy.general_comment, ghg_emissions_reductions_esd_in_2020_kt_co2eq/y: @policy.ghg_emissions_reductions_esd_in_2020_kt_co2eq/y, ghg_emissions_reductions_esd_in_2025_kt_co2eq/y: @policy.ghg_emissions_reductions_esd_in_2025_kt_co2eq/y, ghg_emissions_reductions_esd_in_2030_kt_co2eq/y: @policy.ghg_emissions_reductions_esd_in_2030_kt_co2eq/y, ghg_emissions_reductions_esd_in_2035_kt_co2eq/y: @policy.ghg_emissions_reductions_esd_in_2035_kt_co2eq/y, ghg_emissions_reductions_eu_ets_in_2020_kt_co2eq/y: @policy.ghg_emissions_reductions_eu_ets_in_2020_kt_co2eq/y, ghg_emissions_reductions_eu_ets_in_2025_kt_co2eq/y: @policy.ghg_emissions_reductions_eu_ets_in_2025_kt_co2eq/y, ghg_emissions_reductions_eu_ets_in_2030_kt_co2eq/y: @policy.ghg_emissions_reductions_eu_ets_in_2030_kt_co2eq/y, ghg_emissions_reductions_eu_ets_in_2035_kt_co2eq/y: @policy.ghg_emissions_reductions_eu_ets_in_2035_kt_co2eq/y, ghgs_affected: @policy.ghgs_affected, implementation_period_finish: @policy.implementation_period_finish, indicator_used_to_monitor_and_evaluate_progress_over_time: @policy.indicator_used_to_monitor_and_evaluate_progress_over_time, is_the_policy_or_measure_related_to_a_union_policy?: @policy.is_the_policy_or_measure_related_to_a_union_policy?, jurisdiction: @policy.jurisdiction, link: @policy.link, link_to_national_report: @policy.link_to_national_report, main_reference: @policy.main_reference, name_of_policy_or_measure: @policy.name_of_policy_or_measure, objectives: @policy.objectives, policy_impacting_eu_ets,_esd_or_lulucf_emissions: @policy.policy_impacting_eu_ets,_esd_or_lulucf_emissions, price_reference_year_projected_costs: @policy.price_reference_year_projected_costs, price_reference_year_realised_costs: @policy.price_reference_year_realised_costs, projected_absolute_benefit_per_year_eur: @policy.projected_absolute_benefit_per_year_eur, projected_absolute_costs_per_year_eur: @policy.projected_absolute_costs_per_year_eur, projected_benefits_eur_per_tonne_co2eq_reduced/_sequestered: @policy.projected_benefits_eur_per_tonne_co2eq_reduced/_sequestered, projected_costs_eur_per_tonne_co2eq_reduced/_sequestered: @policy.projected_costs_eur_per_tonne_co2eq_reduced/_sequestered, projected_net_cost_per_year_eur: @policy.projected_net_cost_per_year_eur, projected_net_costs_eur_per_tonne_co2eq_reduced/_sequestered: @policy.projected_net_costs_eur_per_tonne_co2eq_reduced/_sequestered, projection_scenario_in_which_the_policy_or_measure_is_included: @policy.projection_scenario_in_which_the_policy_or_measure_is_included, quantified_objective: @policy.quantified_objective, realised_absolute_benefit_per_year_eur: @policy.realised_absolute_benefit_per_year_eur, realised_absolute_costs_per_year_eur: @policy.realised_absolute_costs_per_year_eur, realised_benefits_eur_per_tonne_co2eq_reduced/_sequestered: @policy.realised_benefits_eur_per_tonne_co2eq_reduced/_sequestered, realised_costs__eur_per_tonne_co2eq_reduced/_sequestered: @policy.realised_costs__eur_per_tonne_co2eq_reduced/_sequestered, realised_net_cost_per_year_eur: @policy.realised_net_cost_per_year_eur, realised_net_costs_eur_per_tonne_co2eq_reduced/_sequestered: @policy.realised_net_costs_eur_per_tonne_co2eq_reduced/_sequestered, reference_for_ex-ante_assessment: @policy.reference_for_ex-ante_assessment, reference_for_ex-post_assessment: @policy.reference_for_ex-post_assessment, reference_for_projected_costs_and_benefits: @policy.reference_for_projected_costs_and_benefits, reference_for_realised_costs_and_benefits: @policy.reference_for_realised_costs_and_benefits, related_union_policy: @policy.related_union_policy, sectors_affected: @policy.sectors_affected, single_policy_or_measure_or_group_of_measures: @policy.single_policy_or_measure_or_group_of_measures, status_of_implementation: @policy.status_of_implementation, total_ghg_emissions_reductions_in_2020_kt_co2eq/y: @policy.total_ghg_emissions_reductions_in_2020_kt_co2eq/y, total_ghg_emissions_reductions_in_2025_kt_co2eq/y: @policy.total_ghg_emissions_reductions_in_2025_kt_co2eq/y, total_ghg_emissions_reductions_in_2030_kt_co2eq/y: @policy.total_ghg_emissions_reductions_in_2030_kt_co2eq/y, total_ghg_emissions_reductions_in_2035_kt_co2eq/y: @policy.total_ghg_emissions_reductions_in_2035_kt_co2eq/y, type_of_policy_instrument: @policy.type_of_policy_instrument, url_to_main_reference: @policy.url_to_main_reference, web_link_for_ex-ante_assessment: @policy.web_link_for_ex-ante_assessment, web_link_for_ex-post_assessment: @policy.web_link_for_ex-post_assessment, web_link_for_projected_costs_and_benefits: @policy.web_link_for_projected_costs_and_benefits, web_link_for_realised_costs_and_benefits: @policy.web_link_for_realised_costs_and_benefits, year_for_which_reduction_applies_ex_post: @policy.year_for_which_reduction_applies_ex_post, year_projected_cost_has_been_calculated_for: @policy.year_projected_cost_has_been_calculated_for, year_realised_cost_has_been_calculated_for: @policy.year_realised_cost_has_been_calculated_for } }
    assert_redirected_to policy_url(@policy)
  end

  test "should destroy policy" do
    assert_difference('Policy.count', -1) do
      delete policy_url(@policy)
    end

    assert_redirected_to policies_url
  end
end
